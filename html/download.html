<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Thunder -- 批量下载资源 DownLoad Task</title>
    <link href="http://apps.bdimg.com/libs/bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container" style="padding-top: 20px;">
    <div class="panel panel-primary">
        <div class="panel-heading">批量下载</div>
        <div class="panel-body">
            <div class="form-group">
                <label for="url" class="text-danger">后台配置地址（*请填写启动秘钥）</label>
                <input class="form-control" id="config-json-url" type="text"
                       value="" placeholder="">
            </div>
            <div class="form-group">
                <label for="menu" class="text-danger">所属菜单</label>
                <input class="form-control" id="menu" type="text" value="" placeholder="">
            </div>
            <div class="form-group">
                <label for="search" class="text-danger">搜索关键词</label>
                <input class="form-control" id="search" type="text" value="" placeholder="">
            </div>
            <div class="form-group">
                <label for="size" class="text-danger">下载条数</label>
                <input class="form-control" id="size" type="number" value="" placeholder="">
            </div>
            <button class="btn btn-primary btn-block" id="config-json-task" type="submit">从后台配置下载资源</button>
        </div>
    </div>
</div>
<script src="//open.thunderurl.com/thunder-link.js"></script>
<script>
    thunderLink();
    jq('#config-json-task').click(function () {
        var url = "http://localhost:8888/download/run?run_key=";
        var key = jq('#config-json-url').val();
        var str = jq('#search').val();
        var size = jq('#size').val();
        url += key;
        var menu = jq('#menu').val();
        if (menu != '') {
            menu = encodeURI(menu);
            url = url + "&menu=" + menu;
        }
        if (str != '') {
            str = encodeURI(str);
            url = url + "&q=" + str;
        }
        url = url + "&page_size=" + size;
        thunderLink.newTask({
            minVersion: '',
            thunderInstallPack: '',
            taskGroupName: '',
            json: url,
            referer: ''
        });
    });
</script>
</body>
</html>
